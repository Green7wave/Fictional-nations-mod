focus_tree = {
	id = Greenlin_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = GRN
		}
	}

	#Focus for Reconstruction of the country
	focus = {
		id = GRN_reconstructionofthecountry
		icon = GFX_goal_generic_production
		x = 28
		y = 0
		cost = 10
		available_if_capitulated = yes
		cancel_if_invalid = no
		continue_if_invalid = yes
		ai_will_do = {
			factor = 80
		}

		available = {
           if = {
			   limit = {
				   has_country_flag = ling_attacked
			   }
			   NOT = { has_idea = industrial_issue2 }
		   } else = {
			   NOT = { has_idea = industrial_issue }
		   }	
		}

		completion_reward = {
			add_timed_idea = {
				idea = greenlin_rising
				days = 180
			}
		}
	}

	#Focus for The People's Freedom of Choice
	focus = {
		id = GRN_thepeoplesfreedomofchoice
		icon = GFX_goal_support_democracy
		x = 3
		y = 1
		cost = 8
		available_if_capitulated = yes
		prerequisite = { focus = GRN_downwiththeking }
		ai_will_do = {
			factor = 80
		}
		mutually_exclusive = { focus = GRN_equalityaboveall }
		completion_reward = {
			add_popularity= { 
				ideology = democratic
				popularity = 0.05
			}
			add_stability = -0.05
		}
	}

	#Focus for Equlity Above All
	focus = {
		id = GRN_equalityaboveall
		icon = GFX_goal_support_communism
		x = 7
		y = 1
		cost = 8
		available_if_capitulated = yes
		prerequisite = { focus = GRN_downwiththeking }
		mutually_exclusive = { focus = GRN_thepeoplesfreedomofchoice }
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			add_popularity= { 
				ideology = communism
				popularity = 0.05
			}
			add_stability = -0.05
		}
	}

	#Focus for Start the revolution
	focus = {
		id = GRN_starttherevolution
		icon = GFX_focus_rom_abdicate
		x = 4
		y = 2
		cost = 8
		available_if_capitulated = yes
		prerequisite = { 
			focus = GRN_thepeoplesfreedomofchoice
			focus = GRN_equalityaboveall
		}
		ai_will_do = {
			factor = 40
		}

		
		completion_reward = {
			# democratic choice
			if = {
				limit = {
					has_completed_focus = GRN_thepeoplesfreedomofchoice
				}
				set_politics= {
        			ruling_party = democratic
         			elections_allowed = no
        		}
        		set_country_flag = greenlin_in_civil_war
        		# civil war stuff
        		if = {
        			limit = {
        				AND = {
        						has_country_flag = support_from_ally
        						has_country_flag = revolution_armed_flag
        				}
        			}
        				
        			start_civil_war = {
          			    ideology = neutrality
          				size = 0.2
        			}
        				
        		} 
        		if = {
        			limit = {
        				OR = {
        					AND = {
        						NOT = { has_country_flag = revolution_armed_flag  }
        						has_country_flag = support_from_ally
        					}
        					AND = {
        						NOT = { has_country_flag = support_from_ally } 
        						has_country_flag = revolution_armed_flag
        					}
        				}
        			}
        			start_civil_war = {
          			  ideology = neutrality
          			  size = 0.5
        			}
        		} 
        		if = {
        			limit = {
        				AND = {
        					NOT = { has_country_flag = support_from_ally }
        					NOT = { has_country_flag = revolution_armed_flag }
        				}
        			}
        			start_civil_war = {
          			  ideology = neutrality
          			  size = 0.7
        			}
        
        		}
        
        
        		add_ideas = special_democracy
			}
			# commie choice
			if = {
				limit = {
					has_completed_focus = GRN_equalityaboveall
				}
				set_politics= {
        			ruling_party = communism
         			elections_allowed = no
        		}
        		set_country_flag = greenlin_in_civil_war
				set_country_flag = sergei_in_control
        		if = {
        			limit = {
        				AND = {
        						has_country_flag = support_from_ally
        						has_country_flag = revolution_armed_flag
        				}
        			}
        				
        			start_civil_war = {
          			    ideology = neutrality
          				size = 0.2
        			}
        				
        		} 
        		if = {
        			limit = {
        				OR = {
        					AND = {
        						NOT = { has_country_flag = revolution_armed_flag  }
        						has_country_flag = support_from_ally
        					}
        					AND = {
        						NOT = { has_country_flag = support_from_ally } 
        						has_country_flag = revolution_armed_flag
        					}
        				}
        			}
        			start_civil_war = {
          			  ideology = neutrality
          			  size = 0.5
        			}
        		} 
        		if = {
        			limit = {
        				AND = {
        					NOT = { has_country_flag = support_from_ally }
        					NOT = { has_country_flag = revolution_armed_flag }
        				}
        			}
        			start_civil_war = {
          			  ideology = neutrality
          			  size = 0.7
        			}
        
        		}
			}
			if = {
				limit = {
					AND = {
						NOT = { has_completed_focus = GRN_equalityaboveall }
						NOT = { has_completed_focus = GRN_thepeoplesfreedomofchoice }
					}
				}
				custom_effect_tooltip = tip_starttherevolution
				
			}
		}
	}

	#Focus for Organization of GRL
	focus = {
		id = GRN_organizationofgrl
		icon = GFX_focus_research2
		x = 0
		y = 4
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_countrysstabilization }
		ai_will_do = {
			factor = 40
		}
		completion_reward = {
			add_ideas = grl 
			add_timed_idea = {
  			  idea = projects3
  			  days = 160
			}
		}
	}

	#Focus for Down With The King
	focus = {
		id = GRN_downwiththeking
		icon = GFX_goal_tfv_sever_ties_with_uk
		x = 10
		y = 0
		cost = 8
		available_if_capitulated = yes
		ai_will_do = {
			factor = 4000
		}
		completion_reward = {
			add_popularity= { 
				ideology = neutrality 
				popularity = -0.05
			}
			add_stability = -0.01
		}
	}

	#Focus for National Security
	focus = {
		id = GRN_nationalsecurity
		icon = GFX_nationalsecurity
		x = 7
		y = 5
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_formthegis }
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			add_ideas = nis

		}
	}

	#Focus for Special alliance
	focus = {
		id = GRN_specialalliance
		icon = GFX_goal_generic_national_unity
		x = 3
		y = 4
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_countrysstabilization }
		ai_will_do = {
			factor = 40
		}
		bypass = {
			GRN = { is_in_faction = yes }
		}
		completion_reward = {
			create_faction = owl_eyed_faction
			# me and the bois make an alliance
			if = {
				limit = {
					any_state = {
						is_controlled_by = ACZ
					}
					ACZ = {
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				ACZ = { country_event = grn.5 }
			}

			if = {
				limit = {
					CRZ = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				CRZ = { country_event = grn.5 }
			}

			if = {
				limit = {
					ROM = { 
						exists = yes 
						NOT = {
							OR = {
								has_completed_focus = ROM_join_axis
								has_completed_focus = ROM_appoint_soviet_friendly_government
								has_completed_focus = ROM_join_comintern
								has_completed_focus = ROM_appoint_german_friendly_government
							}
						}
						has_war = no
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				ROM = { country_event = grn.5 }
			}

			if = {
				limit = {
					PER = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				PER = { country_event = grn.5 }
			}


			if = {
				limit = {
					AFG = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				AFG = { country_event = grn.5 }
			}

			if = {
				limit = {
					IRQ = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				IRQ = { country_event = grn.5 }
			}

			if = {
				limit = {
					HUN = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				HUN = { country_event = grn.5 }
			}


			if = {
				limit = {
					YUG = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				YUG = { country_event = grn.5 }
			}

			if = {
				limit = {
					TUR = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				TUR = { country_event = grn.5 }
			}

			if = {
				limit = {
					SAU = {
						exists = yes
						OR = {
							is_subject = no
							is_subject_of = GRN
						}
					}
				}
				SAU = { country_event = grn.5 }
			}


		}
	}

	#Focus for Technology Sharing
	focus = {
		id = GRN_technologysharing
		icon = GFX_goal_generic_scientific_exchange
		x = -1
		y = 1
		relative_position_id = GRN_specialalliance
		cost = 8
		available_if_capitulated = yes
		continue_if_invalid = yes
		cancel_if_invalid = no
		prerequisite = { focus = GRN_specialalliance }
		mutually_exclusive = { focus = GRN_enhancedtechnology }
		available = {
			num_faction_members > 0
		}

		ai_will_do = {
			factor = 40
		}
		available = {
			is_in_faction= yes
		}
		completion_reward = {
			#GRN = { add_to_tech_sharing_group = green_research }
			every_country = {
				limit = {
					is_in_faction_with = GRN
				}
				hidden_effect = {
					add_to_tech_sharing_group = green_research
				}
   				custom_effect_tooltip = tip_technologysharing
			}
		}
	}

	# focus for Pressure the samller countries
	focus = {
		id = GRN_pressuretheweak
		icon = GFX_goal_generic_forceful_treaty
		x = 1
		y = 1
		relative_position_id = GRN_specialalliance
		cost = 10
		available_if_capitulated = yes
		cancel_if_invalid = no
		continue_if_invalid = yes
		prerequisite = { focus = GRN_specialalliance }
		mutually_exclusive = { }
		available = {
			GRN = { is_in_faction = yes }
		}
		bypass = {
			AND = {
				PER = {is_in_faction_with = GRN}
				IRQ = {is_in_faction_with = GRN}
				AFG = {is_in_faction_with = GRN}
				SAU = {is_in_faction_with = GRN}
			}
		}
		ai_will_do = {
			factor = 40
		}
		completion_reward = {
		  	if = {
				limit = {
					GRN = { is_in_faction = yes }
				}
				PER = {
					add_ai_strategy = {
							type = alliance
							id = "GRN"
							value = 200
					}
					country_event = {
   						id = grn.8
   						random = 10
					}
				}
				AFG = {
					add_ai_strategy = {
							type = alliance
							id = "GRN"
							value = 200
					}
					country_event = {
   						id = grn.8
   						random = 10
					}
				}
				IRQ = {
					add_ai_strategy = {
							type = alliance
							id = "GRN"
							value = 200
					}
					country_event = {
   						id = grn.8
   						random = 10
					}
				}
			}
			if = {
				limit = {
					GRN = { is_in_faction = no }
				}
				custom_effect_tooltip = tip_pressuretheweak
			}

		}


	}

	# focus for 

	#Focus for Enhanced technology
	focus = {
		id = GRN_enhancedtechnology
		icon = GFX_goal_tfv_generic_tech_sharing
		x = 0
		y = 5
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_organizationofgrl }
		mutually_exclusive = { focus = GRN_technologysharing }
		ai_will_do = {
			factor = 40
		}
		completion_reward = {
			add_ideas = enhanced_tech
		}
	}

	#Focus for Country's stabilization
	focus = {
		id = GRN_countrysstabilization
		icon = GFX_focus_rom_handle_king
		x = 4
		y = 3
		cost = 10
		available_if_capitulated = yes
		cancel_if_invalid = no
		continue_if_invalid = yes
		prerequisite = { focus = GRN_starttherevolution }
		ai_will_do = {
			factor = 40
		}
		available = {
			has_civil_war = no
		}
		completion_reward = {
			add_stability = 0.2
			# TODO : make stabilization through events
		}
	}

	#Focus for Ask the neigbour
	focus = {
		id = GRN_asktheneigbour
		icon = GFX_asktheneigbour
		x = 6
		y = 2
		cost = 8
		available_if_capitulated = yes
		prerequisite = { 
			focus = GRN_thepeoplesfreedomofchoice
			focus = GRN_equalityaboveall
		}
		ai_will_do = {
			factor = 320
		}
		bypass = {
			OR ={
				CRZ = { NOT = {has_government = communism}}
				CRZ = { exists = no }
				has_completed_focus = GRN_starttherevolution
			}
			
		}
		completion_reward = {
			#custom_effect_tooltip = tip_asktheneigbour
		
			CRZ = {country_event = grn.2}
		
		}
	}

	#Focus for Arm the revolution
	focus = {
		id = GRN_armtherevolution
		icon = GFX_goal_generic_small_arms
		x = 6
		y = 3
		cost = 6
		available_if_capitulated = yes
		prerequisite = { focus = GRN_asktheneigbour }
		ai_will_do = {
			factor = 80
		}
		bypass = {
			has_completed_focus = GRN_starttherevolution
		}
		completion_reward = {
			custom_effect_tooltip = tip_armtherevolution
			hidden_effect = {
				set_country_flag = revolution_armed_flag
			}
		}
	}

	#Focus for Military's Organization
	focus = {
		id = GRN_militarysorganization
		icon = GFX_militarysorganization
		x = 21
		y = 0
		cost = 10
		available_if_capitulated = yes
		ai_will_do = {
			factor = 20
		}
		completion_reward = {
			army_experience = 40
			
			# adding desginers
			set_country_flag = military_restored
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = GRN_BIGUNS

			# adding some generals - i would make it militray training if i had time
			create_field_marshal = {
				name = "Markiplier"
				portrait_path = "gfx/leaders/GRN/Portrait_GRN_Mark.tga"
				traits = { 
					trickster
					brilliant_strategist
					media_personality
					skilled_staffer
					urban_assault_specialist
				}
				skill = 3
				attack_skill = 3
				defense_skill = 2
				planning_skill = 3
				logistics_skill = 3
			}
			if = {
				limit = {
					has_country_flag = ling_forgiven
				}
				create_corps_commander = {
					name = "Suho Ling"
					portrait_path = "gfx/leaders/GRN/Portrait_GRN_Suho.tga"
					traits = { 
						panzer_leader
						panzer_expert
						trait_engineer
					}
					skill = 3
					attack_skill = 3
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 3
				}
			}
			
			
		}
	}

	#Focus for Where the men fly
	focus = {
		id = GRN_wherethemenfly
		icon = GFX_goal_generic_air_bomber
		x = 30
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_repairthedamage }
		ai_will_do = {
			factor = 60
		}
		completion_reward = {
			random_owned_state = {
				prioritize = { 44 }
				add_building_construction = {
   					type = air_base
    				level = 7
    				instant_build = yes
				}
			}
			random_owned_state = {
				prioritize = { 182 }
				add_building_construction = {
   					type = air_base
    				level = 8
    				instant_build = yes
				}
			}
			random_owned_state = {
				prioritize = { 77 }
				add_building_construction = {
   					type = air_base
    				level = 8
    				instant_build = yes
				}
			}
		}
	}

	#Focus for Naval buildings
	focus = {
		id = GRN_navalbuildings
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 28
		y = 2
		cost = 14
		available_if_capitulated = yes
		prerequisite = { focus = GRN_repairthedamage }
		ai_will_do = {
			factor = 40
		}
		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 731
				}
				731 = {
					add_building_construction = {
   						type = naval_base
    					level = 7
    					instant_build = yes
    					province = 11818
					}
				}
			}
			random_owned_state = {
				prioritize = { 185 }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
   					type = dockyard
    				level = 2
    				instant_build = yes
				}
			}
			random_owned_state = {
				prioritize = { 186 }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
   					type = dockyard
    				level = 2
    				instant_build = yes
				}
			}
		}
	}

	#Focus for Repair the damage
	focus = {
		id = GRN_repairthedamage
		icon = GFX_goal_generic_construct_civilian
		x = 29
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_reconstructionofthecountry }
		ai_will_do = {
			factor = 160
		}
		completion_reward = {
		 if = {
			limit = {
				has_country_flag = ling_attacked
			}
			hidden_effect = {
					48 = {
					add_building_construction = {
  					  	type = industrial_complex
   					  	level = 2
    					instant_build = yes
					}
				}
				212 = {
					add_building_construction = {
  					  	type = arms_factory
   					  	level = 3
    					instant_build = yes
					}
				}
			}
			custom_effect_tooltip = tip_repairthedamage
		 }
		}
	}

	#Focus for Fighters and CAS
	focus = {
		id = GRN_fightersandcas
		icon = GFX_goal_generic_air_fighter2
		x = 20
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { 
			focus = GRN_thehawks 
			focus = GRN_greenlinsbreakers 
			focus = GRN_divisionprograms 
		}
		ai_will_do = {
			factor = 40
		}
	}

	#Focus for Submarine and Destroyers
	focus = {
		id = GRN_submarineanddestroyers
		icon = GFX_goal_generic_navy_submarine
		x = 22
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { 
			focus = GRN_greenlinsbreakers 
			focus = GRN_thehawks 
			focus = GRN_divisionprograms 
		}
		ai_will_do = {
			factor = 39
		}
	}

	#Focus for Division programs
	focus = {
		id = GRN_divisionprograms
		icon = GFX_goal_generic_allies_build_infantry
		x = 19
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_militarysorganization }
		mutually_exclusive = { 
			focus = GRN_thehawks 
		}
		# mutually_exclusive = { focus = GRN_greenlinsbreakers }
		ai_will_do = {
			factor = 1
		}
	}

	#Focus for Greenlin's Breakers
	focus = {
		id = GRN_greenlinsbreakers
		icon = GFX_goal_generic_army_tanks
		x = 23
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_militarysorganization }
		# mutually_exclusive = { focus = GRN_divisionprograms }
		# mutually_exclusive = { focus = GRN_thehawks }
		ai_will_do = {
			factor = 1
		}
	}

	#Focus for The Hawks
	focus = {
		id = GRN_thehawks
		icon = GFX_focus_generic_paratrooper
		x = 21
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_militarysorganization }
		mutually_exclusive = { focus = GRN_divisionprograms }
		# mutually_exclusive = { focus = GRN_greenlinsbreakers }
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			add_ideas = hawks
			# TODO : add paratrooper girl and name her purple
		}
	}

	#Focus for Form the GIS
	focus = {
		id = GRN_formthegis
		icon = GFX_formthegis
		x = 7
		y = 4
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_countrysstabilization }
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			add_ideas = gis
		}
	}

	#Focus for Radar Technology
	focus = {
		id = GRN_radartechnology
		icon = GFX_radartechnology
		x = 26
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_reconstructionofthecountry }
		ai_will_do = {
			factor = 20
		}
		completion_reward ={
			add_tech_bonus = {
				name = radar_bonus
				bonus = 1
				uses = 3
				category = radar_tech
			}
		}
	}

	#Focus for Fix the Industry issue
	focus = {
		id = GRN_fixtheindustryissue
		icon = GFX_goal_generic_air_production
		x = 5
		y = 4
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_countrysstabilization }
		ai_will_do = {
			factor = 160
		}
		completion_reward = {
			country_event = {
				id = grn.9
				days = 1
				random = 18
			}
		}
	}

	#Focus for The fission reaction
	focus = {
		id = GRN_thefissionreaction
		icon = GFX_focus_wonderweapons
		x = 26
		y = 3
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_bettermathmaticalmachines }
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 4
				date > 1938.1.1
			}
			modifier = {
				factor = 2
				date > 1939.1.1
			}
		}
		completion_reward = {
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 1
				ahead_reduction = 2
				uses = 2
				category = nuclear
			}
		}
	}

	#Focus for Better mathmatical machines
	focus = {
		id = GRN_bettermathmaticalmachines
		icon = GFX_bettermathmaticalmachines
		x = 26
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = GRN_radartechnology }
		ai_will_do = {
			factor = 40
		}
		completion_reward = {
			add_tech_bonus = {
				name = electronics_bonus
				bonus = 1
				uses = 2
				category = computing_tech
			}
			add_tech_bonus = {
				name = electronics_bonus
				bonus = 0.8
				uses = 2
				category = encryption_tech
			}
			add_tech_bonus = {
				name = electronics_bonus
				bonus = 0.8
				uses = 2
				category = decryption_tech
			}
		}
	}

	#Focus for Technological Factories
	focus = {
		id = GRN_technological_factories
		icon = GFX_goal_generic_construction
		x = 31
		y = 1
		cost = 10
		available_if_capitulated = yes
		cancel_if_invalid = no
		continue_if_invalid = yes
		prerequisite = { focus = GRN_reconstructionofthecountry }
		ai_will_do = {
			factor = 80
		}
		bypass = {
		}
		available = {
			has_tech = improved_computing_machine
		}
		completion_reward = {
			add_tech_bonus = {
				name = industry_bonus
				bonus = 0.5
				uses = 4
				category = industry
			}
		}
	}

#End of focuses 
 }